(this.webpackJsonpweather_app=this.webpackJsonpweather_app||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(33),i=n.n(r),a=(n(112),n(113),n(9)),s=n(169),o=n(176),l=n(167),j=n(178),u=Object(l.a)((function(e){return Object(j.a)({root:{"& > div:hover":{cursor:"pointer"},width:"200px",margin:"10px",border:"2px solid hsl(199, 21%, 91%)",borderRadius:"10%",backgroundColor:"hsl(167, 100%, 92%)",fontWeight:"bold"},main_card:{},card_content:{margin:"5px"},img_block:{display:"flex"},info_block:{margin:"10px"},buttons_block:{"&>button":{margin:"5px 0"},display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",margin:"0 0 0 0"}})})),d=n(14),b=n.n(d),O=n(28),h=n(16),p=n(64),x=n.n(p),f=function(e){return x.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(e,"&lang=en&appid=671ec129d126e4a3a9fa78e514fcc519&units=metric")).then((function(e){return e.data})).catch((function(e){return e.message="Something wrong"}))},m=function(e,t){return x.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=daily&appid=671ec129d126e4a3a9fa78e514fcc519&units=metric")).then((function(e){return e.data.hourly})).catch((function(e){return e.message="Something wrong"}))},_={cities:[],isLoad:!1,error:""},g=function(e){return{type:"ADD_CITY_WEATHER",city:e}},y=function(e){return{type:"SET_CITY_WEATHER",cities:e}},v=function(e){return{type:"REFRESH_CITY_INFO_WEATHER",city:e}},E=function(e){return{type:"SET_ERROR_WEATHER",error:e}},w=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"IS_LOADING_WEATHER"}),t.next=3,f(e);case 3:c=t.sent,n(v(c)),n({type:"IS_LOADING_WEATHER"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t,n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=n().weatherPage.cities,localStorage.setItem("cities",JSON.stringify(Object(h.a)(c)));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},I={dailyWeather:[],city:{id:0,main:{feels_like:0,humidity:0,pressure:0,temp:0,temp_max:0,temp_min:0},name:"",dt:0,sys:{country:"",id:0,sunrise:0,sunset:0},weather:[{id:"",description:""}],wind:{speed:0},coord:{lat:0,lon:0}}},A=function(e,t){return function(){var n=Object(O.a)(b.a.mark((function n(c){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:"IS_LOADING_WEATHER"}),n.next=3,m(e,t);case 3:r=n.sent,c({type:"SET_DAILY_WEATHER_INFO___FULL_INFO_PAGE",data:r}),c({type:"IS_LOADING_WEATHER"});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},S=n(10),k=n(13),L=n(89),N=n.n(L),R=n(52),C=n.n(R),W=n(51),D=n.n(W),F=n(37),H=n.n(F),P=n(50),G=n.n(P),Y=n(2),U=function(e){var t=new Date(1e3*e.dt),n=u(),r=Object(k.b)(),i=Object(S.g)(),a=Object(c.useCallback)((function(){var t;i.push("/fullInfo"),r((t=e.name,function(){var e=Object(O.a)(b.a.mark((function e(n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"SET_RENDERER_PAGE___FULL_INFO_PAGE",page:t}),n({type:"IS_LOADING_WEATHER"}),e.next=4,f(t);case 4:return c=e.sent,n({type:"SET_FULL_CITY_INFO___FULL_INFO_PAGE",data:c}),e.next=8,n(A(c.coord.lat,c.coord.lon));case 8:n({type:"IS_LOADING_WEATHER"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[i]);return Object(Y.jsxs)(s.a,{className:n.root,children:[Object(Y.jsx)("div",{className:n.main_card,onClick:a,children:Object(Y.jsxs)("div",{className:n.card_content,children:[Object(Y.jsxs)("div",{className:n.img_block,children:[Object(Y.jsx)("img",{style:{height:"50px",borderRadius:"50%"},src:"https://www.countryflags.io/".concat(e.sys.country,"/flat/64.png"),alt:e.name}),Object(Y.jsx)("div",{style:{textAlign:"center",padding:"0 0 0 10px"},children:e.name})]}),Object(Y.jsxs)("div",{className:n.info_block,children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)(G.a,{style:{color:"hsl(215, 35%, 74%)",margin:"3px 0 0 0"}}),t.toLocaleTimeString()]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(H.a,{style:{color:"hsl(215, 35%, 74%)"}}),Object(Y.jsx)("span",{children:e.main.temp})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(D.a,{style:{color:"hsl(215, 35%, 74%)"}}),Object(Y.jsx)("span",{children:t.toLocaleDateString()})]})]})]})}),Object(Y.jsxs)("div",{className:n.buttons_block,children:[Object(Y.jsx)(o.a,{style:{color:"red"},children:Object(Y.jsx)(N.a,{fontSize:"small",onClick:function(){return e.deleteWidget(e.id)}})}),Object(Y.jsx)(o.a,{style:{color:"blue"},children:Object(Y.jsx)(C.a,{fontSize:"small",onClick:function(){return e.refreshWidget(e.name)}})})]})]})},z=n(170),J=n(171),B=Object(l.a)((function(e){return Object(j.a)({root:{justifyContent:"flex-start"}})})),Z=function(){var e=Object(k.c)((function(e){return e.weatherPage.cities})),t=Object(k.c)((function(e){return e.weatherPage.isLoad})),n=Object(k.c)((function(e){return e.weatherPage.error})),c=B(),r=Object(k.b)(),i=function(e){r(function(e){return{type:"DELETE_CITY_WEATHER",id:e}}(e)),r(function(e){return Object(O.a)(b.a.mark((function t(){var n,c,r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=localStorage.getItem("cities"),c=[],n&&(r=JSON.parse(n),c.push.apply(c,Object(h.a)(r))),i=c.filter((function(t){return t.id!==e})),localStorage.setItem("cities",JSON.stringify(Object(h.a)(i)));case 5:case"end":return t.stop()}}),t)})))}(e))},s=function(e){r(w(e))};return t?Object(Y.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(Y.jsx)(z.a,{})}):n?Object(Y.jsx)("div",{style:{textAlign:"center",color:"red"},children:Object(Y.jsx)("h1",{children:n})}):Object(Y.jsx)(J.a,{container:!0,className:c.root,children:e.map((function(e){return Object(Y.jsx)(U,Object(a.a)(Object(a.a)({},e),{},{deleteWidget:i,refreshWidget:s}),e.id)}))})},q=n(172),V=n(177),K=n(173),M=n(174),Q=n(18),X=Object(l.a)((function(e){return Object(j.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"center"},inputRoot:{color:"white",backgroundColor:"black"},inputInput:Object(Q.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})})})),$=n(102),ee=function(){var e=Object(k.b)(),t=Object($.a)({initialValues:{cityTitle:""},onSubmit:function(t,n){var c,r=n.resetForm;e((c=t.cityTitle.toUpperCase(),function(){var e=Object(O.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"IS_LOADING_WEATHER"}),e.next=3,f(c);case 3:if("Something wrong"!==(n=e.sent)){e.next=9;break}t({type:"IS_LOADING_WEATHER"}),t(E("Can't find city, please enter valid data")),e.next=13;break;case 9:return t(g(n)),e.next=12,t(T());case 12:t({type:"IS_LOADING_WEATHER"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e(E("")),r()}}),n=X();return Object(Y.jsx)(q.a,{position:"sticky",style:{backgroundColor:"hsl(269, 85%, 95%)",color:"black"},children:Object(Y.jsxs)(K.a,{children:[Object(Y.jsx)("form",{onSubmit:t.handleSubmit,children:Object(Y.jsx)(V.a,{style:{backgroundColor:"hsl(269, 85%, 95%)",color:"black"},placeholder:"Search your city\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},id:"cityTitle",name:"cityTitle",type:"text",onChange:t.handleChange,value:t.values.cityTitle})}),Object(Y.jsx)(M.a,{variant:"h6",className:n.title,children:"Weather Client"})]})})},te={initialize:!1},ne=n(175),ce=n(36),re=Object(l.a)((function(e){return Object(j.a)({root:{},card_content:{"& > div":{margin:"5px 10px"},margin:"10px 0"},header:{},img_block:{},info_block:{fontWeight:"bold"},info_content__block:{},weather_info__block:{"& > ul":{listStyleType:"none"},"& > ul > li > svg":{color:"hsl(307, 31%, 86%)"},color:"hsl(205, 5%, 39%)"},temperatureBlock:{},button:{},chart:{minWidth:"1000px"}})})),ie=n(92),ae=function(){var e=Object(k.c)((function(e){return e.fullPage.dailyWeather})),t=re(),n=e.map((function(e){return[new Date(1e3*e.dt).toLocaleTimeString().slice(0,-6),e.temp]}));return Object(Y.jsx)("div",{className:t.chart,children:Object(Y.jsx)(ie.a,{height:"500px",chartType:"LineChart",loader:Object(Y.jsx)("div",{children:"Loading Chart"}),data:[["h","temp"]].concat(Object(h.a)(n.splice(23))),options:{hAxis:{title:"Time"},vAxis:{title:"Temperature"}},rootProps:{"data-testid":"1"}})})},se=n(100),oe=n.n(se),le=n(94),je=n.n(le),ue=n(95),de=n.n(ue),be=n(97),Oe=n.n(be),he=n(96),pe=n.n(he),xe=n(98),fe=n.n(xe),me=n(99),_e=n.n(me),ge=function(){var e=Object(k.c)((function(e){return e.fullPage.city})),t=new Date(1e3*e.dt),n=new Date(1e3*e.sys.sunrise).toLocaleTimeString(),r=new Date(1e3*e.sys.sunset).toLocaleTimeString(),i=re(),a=Object(k.b)(),l=Object(S.g)(),j=Object(c.useCallback)((function(){l.push("/")}),[l]);return Object(Y.jsx)(s.a,{className:i.root,children:Object(Y.jsx)(ne.a,{className:i.card_content,children:e.name?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)("div",{style:{display:"flex"},children:[Object(Y.jsx)("div",{className:i.info_block,children:Object(Y.jsxs)("div",{className:i.info_content__block,children:[Object(Y.jsxs)("div",{children:[Object(Y.jsx)(o.a,{style:{color:"blue"},children:Object(Y.jsx)(C.a,{fontSize:"small",onClick:function(){a(w(e.name))}})}),Object(Y.jsx)("h3",{children:e.name}),Object(Y.jsx)("img",{src:"https://www.countryflags.io/".concat(e.sys.country,"/flat/64.png"),alt:e.name})]}),Object(Y.jsxs)("div",{className:i.weather_info__block,children:[Object(Y.jsxs)("ul",{children:[Object(Y.jsxs)("li",{children:[Object(Y.jsx)(G.a,{})," time",Object(Y.jsx)("div",{children:t.toLocaleTimeString()})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(D.a,{})," date",Object(Y.jsx)("div",{children:t.toLocaleDateString()})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(je.a,{})," sunrise",Object(Y.jsx)("div",{children:n})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(de.a,{})," sunset",Object(Y.jsx)("div",{children:r})]})]}),Object(Y.jsxs)("ul",{className:i.temperatureBlock,children:[Object(Y.jsxs)("li",{children:[Object(Y.jsx)(H.a,{})," temp",Object(Y.jsx)("div",{children:e.main.temp})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(H.a,{}),"like a",Object(Y.jsx)("div",{children:e.main.feels_like})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(pe.a,{})," humid",Object(Y.jsx)("div",{children:e.main.humidity})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(Oe.a,{})," press",Object(Y.jsx)("div",{children:e.main.pressure})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(H.a,{}),"max ",Object(Y.jsx)("div",{children:e.main.temp_max})]}),Object(Y.jsxs)("li",{children:[Object(Y.jsx)(H.a,{}),"min ",Object(Y.jsx)("div",{children:e.main.temp_min})]})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(fe.a,{}),"weather",Object(Y.jsx)("div",{children:e.weather[0].description})]}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)(_e.a,{}),"wind",Object(Y.jsxs)("div",{children:[e.wind.speed," m"]})]})]})]})}),Object(Y.jsx)("div",{className:i.button,children:Object(Y.jsx)(o.a,{style:{color:"red"},children:Object(Y.jsx)(oe.a,{fontSize:"small",onClick:j})})}),Object(Y.jsx)("div",{children:Object(Y.jsx)(ae,{})})]}),Object(Y.jsx)("div",{})]}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("h3",{className:i.header,children:"please check widget"}),Object(Y.jsx)(ce.b,{to:"/",children:"go back"})]})})})};var ye=function(){var e=Object(k.c)((function(e){return e.app.initialize})),t=Object(k.b)();return Object(c.useEffect)((function(){t(function(){var e=Object(O.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=localStorage.getItem("cities"))&&(c=JSON.parse(n),t(y(c)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.useEffect)((function(){t(function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){t({type:"INITIALIZE_APP"})}),3e3);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),e?Object(Y.jsxs)(s.a,{className:"App",children:[Object(Y.jsx)(ee,{}),Object(Y.jsxs)(S.d,{children:[Object(Y.jsx)(S.b,{exact:!0,path:"/",render:function(){return Object(Y.jsx)(Z,{})}}),Object(Y.jsx)(S.b,{path:"/fullInfo",render:function(){return Object(Y.jsx)(ge,{})}}),Object(Y.jsx)(S.b,{path:"/404",render:function(){return Object(Y.jsx)("h1",{children:"404: page not found"})}}),Object(Y.jsx)(S.a,{from:"*",to:"/404"})]}),Object(Y.jsx)("footer",{style:{backgroundColor:"hsl(183, 53%, 81%)",height:"20px"}})]}):Object(Y.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(Y.jsx)(z.a,{})})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))},Ee=n(56),we=n(101),Te=Object(Ee.b)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZE_APP":return Object(a.a)(Object(a.a)({},e),{},{initialize:!0});default:return e}},weatherPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY_WEATHER":return Object(a.a)(Object(a.a)({},e),{},{cities:Object(h.a)(t.cities)});case"IS_LOADING_WEATHER":return Object(a.a)(Object(a.a)({},e),{},{isLoad:!e.isLoad});case"ADD_CITY_WEATHER":return Object(a.a)(Object(a.a)({},e),{},{cities:[].concat(Object(h.a)(e.cities.filter((function(e){return e.id!==t.city.id}))),[t.city])});case"DELETE_CITY_WEATHER":return Object(a.a)(Object(a.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==t.id}))});case"REFRESH_CITY_INFO_WEATHER":return Object(a.a)(Object(a.a)({},e),{},{cities:e.cities.map((function(e){return e.id===t.city.id&&(e=t.city),e}))});case"SET_ERROR_WEATHER":return Object(a.a)(Object(a.a)({},e),{},{error:t.error});default:return e}},fullPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FULL_CITY_INFO___FULL_INFO_PAGE":return Object(a.a)(Object(a.a)({},e),{},{city:Object(a.a)({},t.data)});case"SET_DAILY_WEATHER_INFO___FULL_INFO_PAGE":return Object(a.a)(Object(a.a)({},e),{},{dailyWeather:Object(h.a)(t.data)});default:return e}}}),Ie=Object(Ee.c)(Te,Object(Ee.a)(we.a));window.store=Ie.getState(),i.a.render(Object(Y.jsx)(ce.a,{children:Object(Y.jsx)(k.a,{store:Ie,children:Object(Y.jsx)(ye,{})})}),document.getElementById("root")),ve()}},[[145,1,2]]]);
//# sourceMappingURL=main.3dd1c7f8.chunk.js.map